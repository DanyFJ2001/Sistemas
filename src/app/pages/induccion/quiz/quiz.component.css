:host {
  --bg:    #060a1e;
  --bg2:   #0b1030;
  --card:  #10163a;
  --card-h:#151d4a;
  --blue:  #2563eb;
  --blue-l:#3b82f6;
  --cyan:  #22d3ee;
  --green: #34d399;
  --amber: #fbbf24;
  --red:   #f87171;
  --txt:   #e8ecf4;
  --txt2:  #8896b8;
  --txt3:  #5a6888;
  --brd:   rgba(59,130,246,.12);
  --brd-h: rgba(59,130,246,.28);
  --ff:    'Outfit', sans-serif;
  --fb:    'DM Sans', sans-serif;
  display: block;
  font-family: var(--fb);
  color: var(--txt);
  background: var(--bg);
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
}

/* Reveal */
.rv { opacity: 0; transition: opacity .7s cubic-bezier(.16,1,.3,1), transform .7s cubic-bezier(.16,1,.3,1) }
.rv.up { transform: translateY(36px) }
.rv.in-view { opacity: 1; transform: none }

/* Layout */
.quiz-wrap { max-width: 1100px; margin: 0 auto; padding: 0 24px 80px; opacity: 0; transform: translateY(14px); transition: opacity .5s, transform .5s }
.quiz-wrap.live { opacity: 1; transform: none }

/* Top bar */
.q-top { display: flex; align-items: center; justify-content: space-between; padding: 18px 0; position: sticky; top: 0; z-index: 100; background: var(--bg) }
.q-back { display: inline-flex; align-items: center; gap: 6px; background: 0; border: 1px solid var(--brd); color: var(--txt2); padding: 7px 14px; border-radius: 8px; font-family: var(--ff); font-size: 12.5px; cursor: pointer; transition: .25s }
.q-back:hover { border-color: var(--brd-h); color: var(--txt); background: rgba(59,130,246,.06) }
.q-score { font-family: var(--ff); font-size: 13px; font-weight: 600; color: var(--cyan) }

/* Header */
.q-header { text-align: center; padding: 36px 0 44px }
.q-tag { display: inline-block; padding: 6px 16px; background: rgba(37,99,235,.1); border: 1px solid rgba(37,99,235,.22); border-radius: 100px; font-family: var(--ff); font-size: 10.5px; font-weight: 700; letter-spacing: 2.5px; color: var(--blue-l); margin-bottom: 18px }
.q-header h1 { font-family: var(--ff); font-size: clamp(1.5rem, 3.5vw, 2rem); font-weight: 700; margin: 0 0 10px }
.q-header p { font-size: 14px; color: var(--txt2); margin: 0 }

/* ═══════════════════════════════
   CARD GRID + FLIP
   ═══════════════════════════════ */
.card-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 22px;
}

/* Flip wrapper */
.flip-wrapper {
  perspective: 1200px;
  height: 420px;          /* fixed height so front & back match */
}

.flip-inner {
  position: relative;
  width: 100%;
  height: 100%;
  transition: transform .65s cubic-bezier(.4, .0, .2, 1);
  transform-style: preserve-3d;
}

.flip-wrapper.is-flipped .flip-inner {
  transform: rotateY(180deg);
}

/* Shared face styles */
.flip-front,
.flip-back {
  position: absolute;
  inset: 0;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  border-radius: 16px;
  border: 1px solid var(--brd);
  background: var(--card);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.flip-back {
  transform: rotateY(180deg);
}

/* ═══ Top accent line (like reference) ═══ */
.card-top-line {
  height: 3px;
  background: linear-gradient(90deg, var(--blue), var(--blue-l));
  flex-shrink: 0;
}
.card-top-line.line-ok { background: linear-gradient(90deg, #059669, var(--green)) }
.card-top-line.line-fail { background: linear-gradient(90deg, #dc2626, var(--red)) }

/* ═══════════════════════════════
   FRONT FACE
   ═══════════════════════════════ */
.card-head {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  padding: 20px 22px 0;
}

.card-num {
  font-family: var(--ff);
  font-size: 13px;
  font-weight: 600;
  color: var(--txt3);
}

.card-ico {
  color: var(--txt3);
  opacity: .5;
}

.card-title {
  font-family: var(--ff);
  font-size: 15px;
  font-weight: 700;
  margin: 16px 22px 6px;
  line-height: 1.3;
}

.card-question {
  font-size: 12.5px;
  line-height: 1.55;
  color: var(--txt2);
  margin: 0 22px 14px;
  flex-shrink: 0;
}

/* Options inside card */
.card-opts {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 0 18px 20px;
  margin-top: auto;         /* push to bottom */
  overflow-y: auto;
}

.card-opt {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 9px 12px;
  border: 1px solid var(--brd);
  border-radius: 9px;
  background: transparent;
  color: var(--txt2);
  font-family: var(--fb);
  font-size: 12.5px;
  line-height: 1.4;
  text-align: left;
  cursor: pointer;
  transition: all .2s;
  width: 100%;
}

.card-opt:hover {
  border-color: var(--brd-h);
  background: rgba(59,130,246,.05);
  color: var(--txt);
}

.card-opt.picked {
  border-color: var(--blue-l);
  background: rgba(37,99,235,.12);
  color: var(--txt);
}
.card-opt.picked .opt-letter {
  background: var(--blue);
  color: #fff;
}

.opt-letter {
  flex-shrink: 0;
  width: 22px;
  height: 22px;
  border-radius: 6px;
  background: rgba(255,255,255,.04);
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--ff);
  font-size: 10px;
  font-weight: 700;
  color: var(--txt3);
  transition: .2s;
}

.opt-label {
  flex: 1;
}

/* ═══════════════════════════════
   BACK FACE
   ═══════════════════════════════ */
.flip-back {
  padding-bottom: 20px;
  align-items: center;
  justify-content: center;
  text-align: center;
}

.back-ok  { border-color: rgba(52,211,153,.2) }
.back-fail { border-color: rgba(248,113,113,.18) }

.back-badge {
  width: 52px;
  height: 52px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 16px;
}
.back-ok .back-badge  { background: rgba(52,211,153,.12); color: var(--green) }
.back-fail .back-badge { background: rgba(248,113,113,.12); color: var(--red) }

.back-status {
  font-family: var(--ff);
  font-size: 18px;
  font-weight: 700;
  margin: 0 0 16px;
}
.back-ok .back-status  { color: var(--green) }
.back-fail .back-status { color: var(--red) }

.back-answer {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 10px 16px;
  background: rgba(52,211,153,.06);
  border: 1px solid rgba(52,211,153,.15);
  border-radius: 10px;
  margin: 0 22px 14px;
  max-width: 100%;
}
.ba-label { font-family: var(--ff); font-size: 10px; font-weight: 700; color: var(--green); text-transform: uppercase; letter-spacing: .5px }
.ba-text { font-size: 13px; color: var(--txt); line-height: 1.45 }

.back-explain {
  font-size: 13px;
  line-height: 1.65;
  color: var(--txt2);
  margin: 0 22px 18px;
  max-height: 130px;
  overflow-y: auto;
}

.back-flip-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  background: rgba(255,255,255,.05);
  border: 1px solid var(--brd);
  border-radius: 8px;
  color: var(--txt2);
  font-family: var(--ff);
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: .25s;
  margin-top: auto;
}
.back-flip-btn:hover {
  border-color: var(--brd-h);
  color: var(--txt);
  background: rgba(255,255,255,.08);
}

/* ═══════════════════════════════
   SUMMARY
   ═══════════════════════════════ */
.q-summary { margin-top: 40px }
.sum-card { text-align: center; padding: 44px 28px; border-radius: 20px; border: 1px solid var(--brd); animation: popIn .5s cubic-bezier(.16,1,.3,1) }
@keyframes popIn { from { opacity: 0; transform: scale(.95) translateY(12px) } to { opacity: 1; transform: none } }

.sum-great { background: linear-gradient(135deg, rgba(52,211,153,.06), var(--card)); border-color: rgba(52,211,153,.25) }
.sum-ok { background: linear-gradient(135deg, rgba(251,191,36,.06), var(--card)); border-color: rgba(251,191,36,.25) }
.sum-low { background: linear-gradient(135deg, rgba(248,113,113,.06), var(--card)); border-color: rgba(248,113,113,.25) }

.sum-num { display: flex; align-items: baseline; justify-content: center; gap: 4px; margin-bottom: 14px }
.sum-num strong { font-family: var(--ff); font-size: 42px; font-weight: 800 }
.sum-great .sum-num strong { color: var(--green) }
.sum-ok .sum-num strong { color: var(--amber) }
.sum-low .sum-num strong { color: var(--red) }
.sum-num span { font-family: var(--ff); font-size: 18px; color: var(--txt3) }
.sum-card p { font-size: 15px; color: var(--txt2); margin: 0 0 24px }
.sum-btns { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap }

/* Shared buttons */
.btn-fill { display: inline-flex; align-items: center; gap: 7px; padding: 12px 24px; background: linear-gradient(135deg, var(--blue), #1d4ed8); color: #fff; border: none; border-radius: 10px; font-family: var(--ff); font-weight: 600; font-size: 13px; cursor: pointer; transition: .3s; box-shadow: 0 4px 14px rgba(37,99,235,.25) }
.btn-fill:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(37,99,235,.4) }
.btn-ghost { display: inline-flex; align-items: center; gap: 7px; padding: 12px 24px; background: rgba(255,255,255,.04); color: var(--txt); border: 1px solid var(--brd-h); border-radius: 10px; font-family: var(--ff); font-weight: 600; font-size: 13px; cursor: pointer; transition: .3s }
.btn-ghost:hover { background: rgba(255,255,255,.08); border-color: var(--blue-l) }

/* ═══════════════════════════════
   RESPONSIVE
   ═══════════════════════════════ */
@media (max-width: 1024px) {
  .card-grid { grid-template-columns: repeat(2, 1fr); gap: 18px }
  .flip-wrapper { height: 440px }
}

@media (max-width: 680px) {
  .card-grid { grid-template-columns: 1fr; gap: 16px }
  .flip-wrapper { height: 430px }
  .quiz-wrap { padding: 0 16px 60px }
  .q-top { flex-wrap: wrap; gap: 8px }
  .q-header { padding: 24px 0 32px }
  .sum-card { padding: 32px 20px }
  .sum-btns { flex-direction: column; align-items: center }
  .btn-fill, .btn-ghost { width: 100%; justify-content: center }
}

@media (max-width: 420px) {
  .flip-wrapper { height: 460px }
  .card-title { font-size: 14px }
  .card-opt { padding: 8px 10px; font-size: 12px }
}